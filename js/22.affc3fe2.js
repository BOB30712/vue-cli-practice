"use strict";(self["webpackChunkfirst_project"]=self["webpackChunkfirst_project"]||[]).push([[22],{3022:function(t,e,o){o.r(e),o.d(e,{default:function(){return N}});var s=o(6252),n=o(3577),a=o(9963);const l={class:"container"},i={class:"row mt-4"},u={class:"col-md-7"},c={class:"table align-middle"},r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品名稱"),(0,s._)("th",null,"價格"),(0,s._)("th")])],-1),d={style:{width:"200px"}},p={key:0},h={href:"#",class:"text-dark"},g={class:"h5"},_={class:"h6"},m=(0,s._)("div",{class:"h5"},null,-1),b={class:"btn-group btn-group-sm"},v=["onClick"],y=["disabled","onClick"],C={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},k=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),w=[k],x=(0,s.Uk)(" 加到購物車 "),f={class:"col-md-5"},P={class:"sticky-top"},I={class:"table align-middle"},$=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th"),(0,s._)("th",null,"品名"),(0,s._)("th",{style:{width:"130px"}},"數量"),(0,s._)("th",null,"單價")])],-1),q=["onClick"],D={key:0,class:"text-success"},j={class:"input-group input-group-sm"},z=["onUpdate:modelValue","onChange","disabled"],U={class:"input-group-text"},L={key:0,class:"text-end"},A={class:"text-success"},H=(0,s._)("td",{colspan:"3",class:"text-end"},"總計",-1),V={class:"text-end"},Y={key:0},K=(0,s._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),B={class:"text-end text-success"},W={class:"input-group mb-3 input-group-sm"},Z={class:"input-group-append"},E={class:"input-group mb-3 input-group-sm btn-group"};function F(t,e,o,k,F,G){const J=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(J,{active:F.isLoading},null,8,["active"]),(0,s._)("div",l,[(0,s._)("div",i,[(0,s._)("div",u,[(0,s._)("table",c,[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(F.product,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",d,[t.imageUrl?((0,s.wg)(),(0,s.iD)("div",{key:1,style:(0,n.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)):((0,s.wg)(),(0,s.iD)("div",p,"尚未有圖片"))]),(0,s._)("td",null,[(0,s._)("a",h,(0,n.zw)(t.title),1)]),(0,s._)("td",null,[(0,s._)("div",g,(0,n.zw)(t.origin_price),1),(0,s._)("del",_,(0,n.zw)(t.price),1),m]),(0,s._)("td",null,[(0,s._)("div",b,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e=>G.getProduct(t.id)}," 查看更多 ",8,v),(0,s._)("button",{disabled:this.status.loadingItem==t.id,type:"button",class:"btn btn-outline-danger",onClick:e=>G.addProductCart(t.id)},[this.status.loadingItem==t.id?((0,s.wg)(),(0,s.iD)("div",C,w)):(0,s.kq)("",!0),x],8,y)])])])))),128))])])]),(0,s._)("div",f,[(0,s._)("div",P,[(0,s._)("table",I,[$,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(F.productCart.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>G.removeCartItem(t.id)}," 刪 ",8,q)]),(0,s._)("td",null,[(0,s.Uk)((0,n.zw)(t.product.title)+" ",1),t.coupon?((0,s.wg)(),(0,s.iD)("div",D," 已套用優惠券 ")):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("div",j,[(0,s.wy)((0,s._)("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":e=>t.qty=e,onChange:e=>G.changeqty(t.id,t.qty),disabled:t.id===F.status.loadingItem},null,40,z),[[a.nr,t.qty]]),(0,s._)("div",U,"/"+(0,n.zw)(t.product.unit),1)])]),t.coupon?((0,s.wg)(),(0,s.iD)("td",L,[(0,s._)("small",A,"折扣價："+(0,n.zw)(t.product.price),1)])):(0,s.kq)("",!0)])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[H,(0,s._)("td",V,(0,n.zw)(F.productCart.total),1)]),F.productCart.final_total!=F.productCart.total?((0,s.wg)(),(0,s.iD)("tr",Y,[K,(0,s._)("td",B,(0,n.zw)(F.productCart.final_total),1)])):(0,s.kq)("",!0)])]),(0,s._)("div",W,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"輸入禮包碼","onUpdate:modelValue":e[0]||(e[0]=t=>F.coupon_code=t)},null,512),[[a.nr,F.coupon_code]]),(0,s._)("div",Z,[(0,s._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=t=>G.useCoupon(F.coupon_code))}," 套用優惠碼 ")])]),(0,s._)("div",E,[(0,s._)("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[2]||(e[2]=(...t)=>G.removeAllCartItem&&G.removeAllCartItem(...t))}," 清空購物車 ")])])])])])],64)}var G={data(){return{product:[],productCart:[],productCartid:[],coupon_code:"",isLoading:!1,status:{loadingItem:""}}},methods:{getAllProduct(t=1){const e="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/products/all";this.$http.get(e).then((t=>{this.product=t.data.products}))},getProduct(t){this.$router.push(`/UserBoard/UserProduct/${t}`)},getProductCart(){const t="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/cart";this.$http.get(t).then((t=>{this.productCart=t.data.data}))},addProductCart(t){const e="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/cart",o={product_id:t,qty:1};this.status.loadingItem=t,this.$http.post(e,{data:o}).then((t=>{this.getProductCart()}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/cart/${t}`;this.$http.delete(e).then((t=>{this.getProductCart()}))},removeAllCartItem(){const t="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/carts";this.$http.delete(t).then((t=>{this.getProductCart()}))},changeqty(t,e){this.isLoading=!0,this.status.loadingItem=t;const o=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/cart/${t}`,s={product_id:t,qty:e};this.$http.put(o,{data:s}).then((t=>{this.getProductCart(),this.status.loadingItem="",this.isLoading=!1}))},useCoupon(t){const e="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/coupon",o={code:t};this.$http.post(e,{data:o}).then((t=>{this.coupon_code="",this.getProductCart()}))}},created(){this.getAllProduct(),this.getProductCart()}},J=o(3744);const M=(0,J.Z)(G,[["render",F]]);var N=M}}]);
//# sourceMappingURL=22.affc3fe2.js.map