"use strict";(self["webpackChunkfirst_project"]=self["webpackChunkfirst_project"]||[]).push([[589],{4589:function(t,e,l){l.r(e),l.d(e,{default:function(){return nt}});var r=l(6252),d=l(3577),o=l(9963);const s={class:"table mt-4"},n=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"購買時間"),(0,r._)("th",null,"Email"),(0,r._)("th",null,"購買款項"),(0,r._)("th",null,"應付金額"),(0,r._)("th",null,"是否付款"),(0,r._)("th",null,"編輯")])],-1),a={class:"list-unstyled"},i={class:"text-right"},u={class:"form-check form-switch"},c=["onUpdate:modelValue"],_={class:"form-check-label"},p={key:0},m={key:1},h={class:"btn-group"},b=["onClick"],w=["onClick"];function y(t,e,l,y,g,f){const k=(0,r.up)("DelOrder"),D=(0,r.up)("DetailOrder");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("table",s,[n,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.Order,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,d.zw)(t.$filter.date(e.create_at)),1),(0,r._)("td",null,[(0,r._)("span",null,(0,d.zw)(e.user.email),1)]),(0,r._)("td",null,[(0,r._)("ul",a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.products,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t},(0,d.zw)(t.product.title)+" 累計 "+(0,d.zw)(t.qty)+" 每份 "+(0,d.zw)(t.product.price)+"元 ",1)))),128))])]),(0,r._)("td",i,(0,d.zw)(e.total),1),(0,r._)("td",null,[(0,r._)("div",u,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t=>e.is_paid=t},null,8,c),[[o.e8,e.is_paid]]),(0,r._)("label",_,[e.is_paid?((0,r.wg)(),(0,r.iD)("span",p,"已付款")):((0,r.wg)(),(0,r.iD)("span",m,"未付款"))])])]),(0,r._)("td",null,[(0,r._)("div",h,[(0,r._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>f.openModal(e)},"檢視",8,b),(0,r._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>f.openDelOrderModal(e)},"刪除",8,w)])])])))),128))])]),(0,r.Wm)(k,{ref:"del",delitem:g.temporder,onDeleteProduct:f.delOrder},null,8,["delitem","onDeleteProduct"]),(0,r.Wm)(D,{ref:"DetailOrderRef",order:g.temporder},null,8,["order"])],64)}const g={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},f={class:"modal-dialog modal-xl",role:"document"},k={class:"modal-content border-0"},D=(0,r._)("div",{class:"modal-header bg-dark text-white"},[(0,r._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,r._)("span",null,"訂單細節")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},z={class:"row"},O={class:"col-md-4"},x=(0,r._)("h3",null,"用戶資料",-1),$={class:"table"},C={key:0},M=(0,r._)("th",{style:{width:"100px"}},"姓名",-1),j=(0,r._)("th",null,"Email",-1),q=(0,r._)("th",null,"電話",-1),H=(0,r._)("th",null,"地址",-1),Y={class:"col-md-8"},A=(0,r._)("h3",null,"訂單細節",-1),K={class:"table"},Z=(0,r._)("th",{style:{width:"100px"}},"訂單編號",-1),E=(0,r._)("th",null,"下單時間",-1),L=(0,r._)("th",null,"付款時間",-1),P={key:0},R={key:1},U=(0,r._)("th",null,"付款狀態",-1),V={key:0,class:"text-success"},W={key:1,class:"text-muted"},S=(0,r._)("th",null,"總金額",-1),B=(0,r._)("h3",null,"選購商品",-1),F={class:"table"},G=(0,r._)("thead",null,[(0,r._)("tr")],-1),I={class:"text-end"},J={class:"modal-footer"},N=(0,r._)("button",{type:"button",class:"btn btn-primary"},"確認",-1);function Q(t,e,l,o,s,n){return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",f,[(0,r._)("div",k,[D,(0,r._)("div",v,[(0,r._)("div",z,[(0,r._)("div",O,[x,(0,r._)("table",$,[s.temporder.user?((0,r.wg)(),(0,r.iD)("tbody",C,[(0,r._)("tr",null,[M,(0,r._)("td",null,(0,d.zw)(s.temporder.user.name),1)]),(0,r._)("tr",null,[j,(0,r._)("td",null,(0,d.zw)(s.temporder.user.email),1)]),(0,r._)("tr",null,[q,(0,r._)("td",null,(0,d.zw)(s.temporder.user.tel),1)]),(0,r._)("tr",null,[H,(0,r._)("td",null,(0,d.zw)(s.temporder.user.address),1)])])):(0,r.kq)("",!0)])]),(0,r._)("div",Y,[A,(0,r._)("table",K,[(0,r._)("tbody",null,[(0,r._)("tr",null,[Z,(0,r._)("td",null,(0,d.zw)(s.temporder.id),1)]),(0,r._)("tr",null,[E,(0,r._)("td",null,(0,d.zw)(t.$filter.date(s.temporder.create_at)),1)]),(0,r._)("tr",null,[L,(0,r._)("td",null,[s.temporder.paid_date?((0,r.wg)(),(0,r.iD)("span",P,(0,d.zw)(t.$filter.date(s.temporder.paid_date)),1)):(0,r.kq)("",!0),s.temporder.paid_date?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",R,"時間不正確"))])]),(0,r._)("tr",null,[U,(0,r._)("td",null,[s.temporder.is_paid?((0,r.wg)(),(0,r.iD)("strong",V,"已付款")):((0,r.wg)(),(0,r.iD)("span",W,"尚未付款"))])]),(0,r._)("tr",null,[S,(0,r._)("td",null,(0,d.zw)(s.temporder.total),1)])])]),B,(0,r._)("table",F,[G,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.temporder.products,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t},[(0,r._)("th",null,(0,d.zw)(t.product.title),1),(0,r._)("td",null,(0,d.zw)(t.qty)+"/"+(0,d.zw)(t.product.unit),1),(0,r._)("td",I,(0,d.zw)(t.final_total),1)])))),128))])])])])]),(0,r._)("div",J,[(0,r._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>n.hide&&n.hide(...t))},"取消 "),N])])])],512)}var T=l(7424),X=l.n(T),tt={data(){return{modal:{},temporder:{}}},props:{order:{type:Object,default(){return{}}}},watch:{order(){this.temporder=this.order}},methods:{hide(){this.modal.hide(),console.log(this.order)},show(){this.modal.show()}},mounted(){const t=document.querySelector("#productModal");this.modal=new(X())(t)}},et=l(3744);const lt=(0,et.Z)(tt,[["render",Q]]);var rt=lt,dt=l(3440),ot={data(){return{Order:[],temporder:{}}},inject:["emitter"],components:{DetailOrder:rt,DelOrder:dt.Z},methods:{getAllOrder(){const t="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/admin/orders?page=1";this.$http.get(t).then((t=>{console.log(t),this.Order=t.data.orders}))},openModal(t){this.temporder={...t};const e=this.$refs.DetailOrderRef;e.show()},openDelOrderModal(t){this.temporder={...t};const e=this.$refs.del;e.show()},delOrder(){const t=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/admin/order/${this.temporder.id}`;this.$http.delete(t).then((t=>{console.log(t),this.getAllOrder(),this.emitter.emit("push-message",{style:"success",title:"刪除成功"})}));const e=this.$refs.del;e.hide()}},created(){this.getAllOrder(),console.log("進入訂單頁面")}};const st=(0,et.Z)(ot,[["render",y]]);var nt=st}}]);
//# sourceMappingURL=589.e2120640.js.map