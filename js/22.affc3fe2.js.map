{"version":3,"file":"js/22.affc3fe2.js","mappings":"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","sources":["webpack://first-project/./src/views/UserCart.vue","webpack://first-project/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n    <div class=\"container\">\r\n      <div class=\"row mt-4\">\r\n        <div class=\"col-md-7\">\r\n          <table class=\"table align-middle\">\r\n            <thead>\r\n            <tr>\r\n              <th>圖片</th>\r\n              <th>商品名稱</th>\r\n              <th>價格</th>\r\n              <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr v-for=\"item in product\" :key=\"item\">\r\n              <td style=\"width: 200px\">\r\n                <div v-if=\"!item.imageUrl\">尚未有圖片</div>\r\n                <div v-else :style=\"{backgroundImage: `url(${item.imageUrl})`}\" style=\"height: 100px; background-size: cover; background-position: center\"></div>\r\n              </td>\r\n              <td><a href=\"#\" class=\"text-dark\">{{item.title}}</a></td>\r\n              <td>\r\n                <div class=\"h5\">{{item.origin_price}}</div>\r\n                <del class=\"h6\">{{item.price}}</del>\r\n                <div class=\"h5\"></div>\r\n              </td>\r\n              <td>\r\n                <div class=\"btn-group btn-group-sm\">\r\n                  <button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"getProduct(item.id)\">\r\n                    查看更多\r\n                  </button>\r\n                  <button :disabled=\"this.status.loadingItem==item.id\" type=\"button\" class=\"btn btn-outline-danger\" @click=\"addProductCart(item.id)\">\r\n                    <div v-if=\"this.status.loadingItem==item.id\" class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    加到購物車\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"col-md-5\">\r\n          <div class=\"sticky-top\">\r\n            <table class=\"table align-middle\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>品名</th>\r\n                  <th style=\"width: 130px\">數量</th>\r\n                  <th>單價</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"item in productCart.carts\" :key=\"item\">\r\n                  <td>\r\n                    <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"removeCartItem(item.id)\">\r\n                      刪\r\n                    </button>\r\n                  </td>\r\n                  <td>\r\n                    {{item.product.title}}\r\n                    <div class=\"text-success\" v-if=\"item.coupon\">\r\n                      已套用優惠券\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"input-group input-group-sm\">\r\n                      <input min=\"1\" type=\"number\" class=\"form-control\" v-model=\"item.qty\" @change=\"changeqty(item.id,item.qty)\" :disabled=\"item.id === status.loadingItem\">\r\n                      <div class=\"input-group-text\">/{{item.product.unit}}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td class=\"text-end\" v-if=\"item.coupon\">\r\n                    <small class=\"text-success\">折扣價：{{item.product.price}}</small>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n              <tfoot>\r\n              <tr>\r\n                <td colspan=\"3\" class=\"text-end\">總計</td>\r\n                <td class=\"text-end\">{{productCart.total}}</td>\r\n              </tr>\r\n              <tr v-if=\"productCart.final_total!=productCart.total\">\r\n                <td colspan=\"3\" class=\"text-end text-success\" >折扣價</td>\r\n                <td class=\"text-end text-success\">{{productCart.final_total}}</td>\r\n              </tr>\r\n              </tfoot>\r\n            </table>\r\n            <div class=\"input-group mb-3 input-group-sm\">\r\n              <input type=\"text\" class=\"form-control\" placeholder=\"輸入禮包碼\" v-model=\"coupon_code\">\r\n              <div class=\"input-group-append\">\r\n                <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"useCoupon(coupon_code)\">\r\n                  套用優惠碼\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div class=\"input-group mb-3 input-group-sm btn-group\">\r\n                <button class=\"btn btn-sm btn-outline-danger\" type=\"button\" @click=\"removeAllCartItem\">\r\n                  清空購物車\r\n                </button>\r\n            </div>\r\n            </div>\r\n           </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      product: [],\r\n      productCart: [],\r\n      productCartid: [],\r\n      coupon_code: '',\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: '' // 對應品項 id\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getAllProduct (page = 1) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.product = res.data.products\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/UserBoard/UserProduct/${id}`)\r\n    },\r\n    getProductCart () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.productCart = res.data.data\r\n        })\r\n    },\r\n    addProductCart (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.status.loadingItem = id\r\n      this.$http.post(url, { data: cart })\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.getProductCart()\r\n        })\r\n    },\r\n    removeCartItem (id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.$http.delete(url)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.getProductCart()\r\n        })\r\n    },\r\n    removeAllCartItem () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http.delete(url)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.getProductCart()\r\n        })\r\n    },\r\n    changeqty (id, count) {\r\n      this.isLoading = true\r\n      this.status.loadingItem = id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      const cart = {\r\n        product_id: id,\r\n        qty: count\r\n      }\r\n      this.$http.put(url, { data: cart })\r\n        .then((res) => {\r\n          this.getProductCart()\r\n          this.status.loadingItem = ''\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    useCoupon (name) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const coupon = {\r\n        code: name\r\n      }\r\n      this.$http.post(url, { data: coupon })\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.coupon_code = ''\r\n          this.getProductCart()\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getAllProduct()\r\n    this.getProductCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=0c7a412f\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vue practice\\\\vue cli\\\\vue-cli-practice\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","href","role","_hoisted_16","colspan","_createVNode","_component_Loading","active","$data","_hoisted_5","_createElementBlock","_Fragment","_renderList","item","key","imageUrl","backgroundImage","_hoisted_7","_toDisplayString","title","origin_price","price","_hoisted_11","type","onClick","$options","id","_hoisted_13","disabled","status","loadingItem","_hoisted_17","_hoisted_22","carts","_hoisted_23","product","coupon","min","qty","$event","onChange","unit","_hoisted_30","total","final_total","_hoisted_32","_hoisted_33","placeholder","data","productCart","productCartid","coupon_code","isLoading","methods","getAllProduct","page","api","this","$http","get","then","res","products","getProduct","$router","push","getProductCart","url","addProductCart","cart","product_id","post","removeCartItem","delete","removeAllCartItem","changeqty","count","put","useCoupon","name","code","created","__exports__","render"],"sourceRoot":""}